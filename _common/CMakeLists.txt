find_package(nlohmann_json REQUIRED)
find_package(spdlog REQUIRED)

set(COMMON_DIR ${CMAKE_SOURCE_DIR}/_common)

# Find all autogenerated hpp
file(GLOB_RECURSE AUTOGENERATED_SOURCES
    "${COMMON_DIR}/AutoGenerated/src/*.cpp"
)

set(COMMON_SOURCES
    ${COMMON_DIR}/src/Network/JsonSerializer.cpp
    ${AUTOGENERATED_SOURCES}
)

add_library(common STATIC "${COMMON_SOURCES}")

target_include_directories(common PUBLIC "${COMMON_DIR}/include")
target_include_directories(common PUBLIC "${COMMON_DIR}/AutoGenerated/include")

target_link_libraries(common
    nlohmann_json::nlohmann_json
    spdlog::spdlog
)
